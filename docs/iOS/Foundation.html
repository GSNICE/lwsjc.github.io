<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Foundation | Technology Stack</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Technology Stack">
    
    <link rel="preload" href="/technology-stack/assets/css/0.styles.e1d3b511.css" as="style"><link rel="preload" href="/technology-stack/assets/js/app.33e0f0b6.js" as="script"><link rel="preload" href="/technology-stack/assets/js/2.fe7261c1.js" as="script"><link rel="preload" href="/technology-stack/assets/js/24.65cc23d8.js" as="script"><link rel="prefetch" href="/technology-stack/assets/js/10.993cb2b7.js"><link rel="prefetch" href="/technology-stack/assets/js/11.3c8be803.js"><link rel="prefetch" href="/technology-stack/assets/js/12.2baf6752.js"><link rel="prefetch" href="/technology-stack/assets/js/13.f5fc67a9.js"><link rel="prefetch" href="/technology-stack/assets/js/14.bd261848.js"><link rel="prefetch" href="/technology-stack/assets/js/15.a92df329.js"><link rel="prefetch" href="/technology-stack/assets/js/16.59346357.js"><link rel="prefetch" href="/technology-stack/assets/js/17.ebd84168.js"><link rel="prefetch" href="/technology-stack/assets/js/18.e488a04c.js"><link rel="prefetch" href="/technology-stack/assets/js/19.8ba4da5f.js"><link rel="prefetch" href="/technology-stack/assets/js/20.3184ef04.js"><link rel="prefetch" href="/technology-stack/assets/js/21.a998311e.js"><link rel="prefetch" href="/technology-stack/assets/js/22.3317584f.js"><link rel="prefetch" href="/technology-stack/assets/js/23.8bb6b234.js"><link rel="prefetch" href="/technology-stack/assets/js/25.042e9796.js"><link rel="prefetch" href="/technology-stack/assets/js/26.8a472b4b.js"><link rel="prefetch" href="/technology-stack/assets/js/27.9b85d2a1.js"><link rel="prefetch" href="/technology-stack/assets/js/28.44a6f02a.js"><link rel="prefetch" href="/technology-stack/assets/js/29.24d98848.js"><link rel="prefetch" href="/technology-stack/assets/js/3.a4745d76.js"><link rel="prefetch" href="/technology-stack/assets/js/30.73398d06.js"><link rel="prefetch" href="/technology-stack/assets/js/31.f47f876c.js"><link rel="prefetch" href="/technology-stack/assets/js/32.20c5d518.js"><link rel="prefetch" href="/technology-stack/assets/js/33.19f61007.js"><link rel="prefetch" href="/technology-stack/assets/js/34.7c784d33.js"><link rel="prefetch" href="/technology-stack/assets/js/35.b60b70de.js"><link rel="prefetch" href="/technology-stack/assets/js/36.caa6aad3.js"><link rel="prefetch" href="/technology-stack/assets/js/37.fe2b45f7.js"><link rel="prefetch" href="/technology-stack/assets/js/4.27e7f231.js"><link rel="prefetch" href="/technology-stack/assets/js/5.cae5ed9c.js"><link rel="prefetch" href="/technology-stack/assets/js/6.1960cf59.js"><link rel="prefetch" href="/technology-stack/assets/js/7.73ad76df.js"><link rel="prefetch" href="/technology-stack/assets/js/8.a4a9c561.js"><link rel="prefetch" href="/technology-stack/assets/js/9.d08e4b5d.js">
    <link rel="stylesheet" href="/technology-stack/assets/css/0.styles.e1d3b511.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/technology-stack/" class="home-link router-link-active"><!----> <span class="site-name">Technology Stack</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/technology-stack/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.gsnice.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GSNICE
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://blog.csdn.net/u012439446" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/GSNICE" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/technology-stack/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.gsnice.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GSNICE
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://blog.csdn.net/u012439446" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/GSNICE" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/technology-stack/docs/Home/" class="sidebar-link">关于</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technology-stack/docs/Home/#技术栈" class="sidebar-link">技术栈</a></li><li class="sidebar-sub-header"><a href="/technology-stack/docs/Home/#联系方式" class="sidebar-link">联系方式</a></li></ul></li><li><section class="sidebar-group collapsable depth-0"><a href="/technology-stack/docs/iOS/" class="sidebar-heading clickable router-link-active"><span>iOS</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/technology-stack/docs/Android/" class="sidebar-heading clickable"><span>Android</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/technology-stack/docs/Flutter/" class="sidebar-heading clickable"><span>Flutter</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/technology-stack/docs/Vue/" class="sidebar-heading clickable"><span>Vue</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/technology-stack/docs/PHP/" class="sidebar-heading clickable"><span>PHP</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/technology-stack/docs/Python/" class="sidebar-heading clickable"><span>Python</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="foundation"><a href="#foundation" class="header-anchor">#</a> Foundation</h1> <h2 id="_1-nil、nil、nsnull-有什么区别"><a href="#_1-nil、nil、nsnull-有什么区别" class="header-anchor">#</a> 1.nil、NIL、NSNULL 有什么区别？</h2> <ul><li><p>nil、NIL 可以说是等价的，都代表内存中一块空地址。</p></li> <li><p>NSNULL 代表一个指向 nil 的对象。</p></li></ul> <h2 id="_2-如何实现一个线程安全的-nsmutablearray"><a href="#_2-如何实现一个线程安全的-nsmutablearray" class="header-anchor">#</a> 2.如何实现一个线程安全的 NSMutableArray?</h2> <p>NSMutableArray是线程不安全的，当有多个线程同时对数组进行操作的时候可能导致崩溃或数据错误</p> <ul><li><p>线程锁：使用线程锁对数组读写时进行加锁</p></li> <li><p>派发队列：在《Effective Objective-C 2.0..》书中第41条：多用派发队列，少用同步锁中指出：使用“串行同步队列”（serial synchronization queue），将读取操作及写入操作都安排在同一个队列里，即可保证数据同步。而通过并发队列，结合GCD的栅栏块（barrier）来不仅实现数据同步线程安全，还比串行同步队列方式更高效。</p></li></ul> <h2 id="_3-atomic-修饰的属性是绝对安全的吗-为什么"><a href="#_3-atomic-修饰的属性是绝对安全的吗-为什么" class="header-anchor">#</a> 3.atomic 修饰的属性是绝对安全的吗？为什么？</h2> <p>不是，所谓的安全只是局限于 Setter、Getter 的访问器方法而言的，你对它做 Release 的操作是不会受影响的。这个时候就容易崩溃了。</p> <h2 id="_4-实现-isequal-和-hash-方法时要注意什么"><a href="#_4-实现-isequal-和-hash-方法时要注意什么" class="header-anchor">#</a> 4.实现 isEqual 和 hash 方法时要注意什么？</h2> <ul><li><p>hash</p> <p>对关键属性的hash值进行位或运算作为hash值</p></li> <li><p>isEqual</p> <p>==运算符判断是否是同一对象, 因为同一对象必然完全相同</p> <p>判断是否是同一类型, 这样不仅可以提高判等的效率, 还可以避免隐式类型转换带来的潜在风险</p> <p>判断对象是否是nil, 做参数有效性检查</p> <p>各个属性分别使用默认判等方法进行判断</p> <p>返回所有属性判等的与结果</p></li></ul> <h2 id="_5-id-和-instancetype-有什么区别"><a href="#_5-id-和-instancetype-有什么区别" class="header-anchor">#</a> 5.id 和 instanceType 有什么区别？</h2> <ul><li><p>相同点</p> <p>instancetype 和 id 都是万能指针，指向对象。</p></li> <li><p>不同点：</p> <p>1.id 在编译的时候不能判断对象的真实类型，instancetype 在编译的时候可以判断对象的真实类型。</p> <p>2.id 可以用来定义变量，可以作为返回值类型，可以作为形参类型；instancetype 只能作为返回值类型。</p></li></ul> <h2 id="_6-self和super的区别"><a href="#_6-self和super的区别" class="header-anchor">#</a> 6.self和super的区别</h2> <ul><li><p>self调用自己方法，super调用父类方法</p></li> <li><p>self是类，super是预编译指令</p></li> <li><p>[self class] 和 [super class] 输出是一样的</p></li> <li><p>self和super底层实现原理</p> <p>1.当使用 self 调用方法时，会从当前类的方法列表中开始找，如果没有，就从父类中再找；</p> <p>而当使用 super 时，则从父类的方法列表中开始找，然后调用父类的这个方法</p> <p>2.当使用 self 调用时，会使用 objc_msgSend 函数：</p> <div class="language-c extra-class"><pre class="language-c"><code>id <span class="token function">objc_msgSend</span><span class="token punctuation">(</span>id theReceiver<span class="token punctuation">,</span> SEL theSelector<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre></div><p>第一个参数是消息接收者，第二个参数是调用的具体类方法的 selector，后面是 selector 方法的可变参数。以 [self setName:] 为例，编译器会替换成调用 objc_msgSend 的函数调用，其中 theReceiver 是 self，theSelector 是 @selector(setName:)，这个 selector 是从当前 self 的 class 的方法列表开始找的 setName，当找到后把对应的 selector 传递过去。</p> <p>3.当使用 super 调用时，会使用 objc_msgSendSuper 函数：</p> <div class="language-c extra-class"><pre class="language-c"><code>id <span class="token function">objc_msgSendSuper</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">objc_super</span> <span class="token operator">*</span>super<span class="token punctuation">,</span> SEL op<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre></div><p>第一个参数是个objc_super的结构体，第二个参数还是类似上面的类方法的selector</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">struct</span> <span class="token class-name">objc_super</span> <span class="token punctuation">{</span>
	id receiver<span class="token punctuation">;</span>
	Class superClass<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h2 id="_7-synthesize和-dynamic分别有什么作用"><a href="#_7-synthesize和-dynamic分别有什么作用" class="header-anchor">#</a> 7.@synthesize和@dynamic分别有什么作用？</h2> <ul><li><p>@property有两个对应的词，一个是 @synthesize，一个是 @dynamic。如果 @synthesize和 @dynamic都没写，那么默认的就是@syntheszie var = _var;</p></li> <li><p>@synthesize 的语义是如果你没有手动实现 setter 方法和 getter 方法，那么编译器会自动为你加上这两个方法。</p></li> <li><p>@dynamic 告诉编译器：属性的 setter 与 getter 方法由用户自己实现，不自动生成。（当然对于 readonly 的属性只需提供 getter 即可）。假如一个属性被声明为 @dynamic var，然后你没有提供 @setter方法和 @getter 方法，编译的时候没问题，但是当程序运行到 instance.var = someVar，由于缺 setter 方法会导致程序崩溃；或者当运行到 someVar = var 时，由于缺 getter 方法同样会导致崩溃。编译时没问题，运行时才执行相应的方法，这就是所谓的动态绑定。</p></li></ul> <h2 id="_8-typeof-和-typeof-typeof-的区别"><a href="#_8-typeof-和-typeof-typeof-的区别" class="header-anchor">#</a> 8.typeof 和 __typeof，<strong>typeof</strong> 的区别?</h2> <ul><li><p>__typeof __() 和 __typeof() 是 C语言 的编译器特定扩展，因为标准 C 不包含这样的运算符。 标准 C 要求编译器用双下划线前缀语言扩展（这也是为什么你不应该为自己的函数，变量等做这些）</p></li> <li><p>typeof() 与前两者完全相同的，只不过去掉了下划线，同时现代的编译器也可以理解。</p></li></ul> <p>所以这三个意思是相同的，但没有一个是标准C，不同的编译器会按需选择符合标准的写法。</p> <h2 id="_9-类族"><a href="#_9-类族" class="header-anchor">#</a> 9.类族</h2> <p>系统框架中有许多类簇，大部分collection类都是类族。例如NSArray与其可变版本NSMutableArray。这样看来实际上有两个抽象基类，一个用于不可变数组，一个用于可变数组。尽管具备公共接口的类有两个，但任然可以合起来算一个类族。不可变的类定义了对所有数组都通用的方法，而可变类则定义了那些只适用于可变数组的方法。两个类共同属于同一个类族，这意味着二者在实现各自类型的数组时可以共用实现代码，此外还能把可变数组复制成不可变数组，反之亦然。</p> <h2 id="_10-struct和class的区别"><a href="#_10-struct和class的区别" class="header-anchor">#</a> 10.struct和class的区别</h2> <ul><li><p>类： 引用类型（位于栈上面的指针（引用）和位于堆上的实体对象）</p></li> <li><p>结构：值类型（实例直接位于栈中）</p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/technology-stack/assets/js/app.33e0f0b6.js" defer></script><script src="/technology-stack/assets/js/2.fe7261c1.js" defer></script><script src="/technology-stack/assets/js/24.65cc23d8.js" defer></script>
  </body>
</html>
